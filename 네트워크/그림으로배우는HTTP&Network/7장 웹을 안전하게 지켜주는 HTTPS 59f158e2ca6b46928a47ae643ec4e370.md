# 7장 웹을 안전하게 지켜주는  HTTPS

# 7.1 HTTP의 약점

- 평문(암호화하지않은) 통신이기에 도청 가능
- 통신 상대를 확인하지 않으므로 위장 가능
- 완전성을 증명할수 없어서 위조 가능

## 7.1.1 평문이기 때문에 도청 가능

메시지가 암호화되더라도 암호화된 메시지 자체를 누군가 볼 수 있음 

### 암호화로 도청을 피하다

1) 통신 암호화

SSL 이나 TLS 라는 다른 프로토콜을 조합함으로써 HTTP의 통신 내용 암호화

SSL 등을 이용해 안전한 통신로 확립 후 그 통신로를 통해 HTTP 통신

SSL + HTTP ⇒ HTTPS

2) 콘텐츠 암호화

콘텐츠 내용 자체 암호화

HTTP 메시지에 포함되는 콘텐츠만 암호화

이게 유효하려면 클라이언트, 서버가 콘텐츠의 암호화나 복호화 구조를 갖는것이 전제이므로 사용 어려움 

## 7.1.2 통신 상대를 확인하지 않기 때문에 위장 가능

### 누구나 리퀘스트할 수 있다

리퀘스트오면 서버는 누구든지 리스폰스 반환 

- 위장한 웹서버
- 위장한 클라이언트
- 접근 허가 상대아닌 경우
- 의미없는 리퀘스트 허용. 대량의 리퀘스트에 의한 Dos 공격을 방지 할 수 없다.

### 상대를 확인하는 증명서

HTTP에서는 통신 상대를 확인할 수 없지만 SSL로 상대 확인 가능 

## 7.1.3 완전성을 증명할 수 없기 때문에 변조 가능

### 수신한 내용이 다를지도 모른다

발신-수신 사이에 변조가능성 

중간자 공격 : 공격자가 도중에 리퀘스트,리스폰스를 빼앗아 변조하는 공격 

### 변조를 방지하려면?

-MD5나 SHA-1 등의 해시값 확인 

-파일의 디지털 서명 확인 

# 7.2 HTTP + 암호화 + 인증 + 완전성 보호 = HTTPS

## 7.2.1 HTTP에 암호화와 인증과 완전성 보호를 더한 HTTPS

## 7.2.2 HTTPS는 SSL의 껍질을 덮어쓴 HTTP

HTTP 통신을 하는 소켓 부분을 SSL이나 TLS라는 프로토콜로 대체하는 것 

HTTP - TCP 통신이 아니라

HTTP - SSL - TCP 통신 

## 7.2.3 상호간에 키를 교환하는 공개키 암호화 방식

- 공통키 암호화 방식

    하나의 키로 암/복호화 

    이렇게 되면 클라이언트-서버간 공통키를 공유할 때 중간에 가로챌 가능성 있음

- 공개키 암호화 방식

    `공개키 - 비밀키`` 가 하나의 쌍

    공개키는 누구에게 알려져도 상관없음 

### HTTPS는 하이브리드 암호 시스템

공통키방식 + 공개키방식 조합

키 교환 ( 공개키)

메시지교환 (공통키)

## 7.2.4 공개키가 정확한지 아닌지 증명하는 증명서

 

![7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%A6%20%E1%84%8C%E1%85%B5%E1%84%8F%E1%85%A7%E1%84%8C%E1%85%AE%E1%84%82%E1%85%B3%E1%86%AB%20HTTPS%2059f158e2ca6b46928a47ae643ec4e370/IMG_9678.heic](7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%A6%20%E1%84%8C%E1%85%B5%E1%84%8F%E1%85%A7%E1%84%8C%E1%85%AE%E1%84%82%E1%85%B3%E1%86%AB%20HTTPS%2059f158e2ca6b46928a47ae643ec4e370/IMG_9678.heic)

![7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%A6%20%E1%84%8C%E1%85%B5%E1%84%8F%E1%85%A7%E1%84%8C%E1%85%AE%E1%84%82%E1%85%B3%E1%86%AB%20HTTPS%2059f158e2ca6b46928a47ae643ec4e370/IMG_9677.heic](7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%A6%20%E1%84%8C%E1%85%B5%E1%84%8F%E1%85%A7%E1%84%8C%E1%85%AE%E1%84%82%E1%85%B3%E1%86%AB%20HTTPS%2059f158e2ca6b46928a47ae643ec4e370/IMG_9677.heic)

![7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%A6%20%E1%84%8C%E1%85%B5%E1%84%8F%E1%85%A7%E1%84%8C%E1%85%AE%E1%84%82%E1%85%B3%E1%86%AB%20HTTPS%2059f158e2ca6b46928a47ae643ec4e370/IMG_9676.heic](7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%92%E1%85%A1%E1%84%80%E1%85%A6%20%E1%84%8C%E1%85%B5%E1%84%8F%E1%85%A7%E1%84%8C%E1%85%AE%E1%84%82%E1%85%B3%E1%86%AB%20HTTPS%2059f158e2ca6b46928a47ae643ec4e370/IMG_9676.heic)